{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.237.1"},"children":{"CronStack":{"id":"CronStack","path":"CronStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"premier-league-matches-fn":{"id":"premier-league-matches-fn","path":"CronStack/premier-league-matches-fn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.237.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"CronStack/premier-league-matches-fn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"CronStack/premier-league-matches-fn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CronStack/premier-league-matches-fn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"CronStack/premier-league-matches-fn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"premierleaguematchesfnServiceRoleDefaultPolicy6BF9C2A4","roles":[{"Ref":"premierleaguematchesfnServiceRoleB818D8D2"}]}}}}}}},"Code":{"id":"Code","path":"CronStack/premier-league-matches-fn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.237.1"},"children":{"Stage":{"id":"Stage","path":"CronStack/premier-league-matches-fn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.237.1"}},"AssetBucket":{"id":"AssetBucket","path":"CronStack/premier-league-matches-fn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.237.1"}}}},"Resource":{"id":"Resource","path":"CronStack/premier-league-matches-fn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"b6b43c77fdd1e4e767b98b0166f3df801be36277288d9e790b8dbac5b03ee316.zip"},"description":"Fetches daily Premier League matches and emails summary","environment":{"variables":{"API_FOOTBALL_KEY":"","RECIPIENT_EMAIL":"","SENDER_EMAIL":""}},"functionName":"premier-league-matches","handler":"handler.main","memorySize":128,"role":{"Fn::GetAtt":["premierleaguematchesfnServiceRoleB818D8D2","Arn"]},"runtime":"python3.12","timeout":120}}}}},"premier-league-matches-rule":{"id":"premier-league-matches-rule","path":"CronStack/premier-league-matches-rule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"CronStack/premier-league-matches-rule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Schedule for premier-league-matches","name":"premier-league-matches-schedule","scheduleExpression":"cron(0 8 * * ? *)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["premierleaguematchesfnB5ACB39E","Arn"]}}]}}},"AllowEventRuleCronStackpremierleaguematchesfnFB009FC3":{"id":"AllowEventRuleCronStackpremierleaguematchesfnFB009FC3","path":"CronStack/premier-league-matches-rule/AllowEventRuleCronStackpremierleaguematchesfnFB009FC3","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["premierleaguematchesfnB5ACB39E","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["premierleaguematchesruleE8775788","Arn"]}}}}}},"calendar-sms-fn":{"id":"calendar-sms-fn","path":"CronStack/calendar-sms-fn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.237.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"CronStack/calendar-sms-fn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"CronStack/calendar-sms-fn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CronStack/calendar-sms-fn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"CronStack/calendar-sms-fn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"calendarsmsfnServiceRoleDefaultPolicy564F18A4","roles":[{"Ref":"calendarsmsfnServiceRoleCACE1462"}]}}}}}}},"Code":{"id":"Code","path":"CronStack/calendar-sms-fn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.237.1"},"children":{"Stage":{"id":"Stage","path":"CronStack/calendar-sms-fn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.237.1"}},"AssetBucket":{"id":"AssetBucket","path":"CronStack/calendar-sms-fn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.237.1"}}}},"Resource":{"id":"Resource","path":"CronStack/calendar-sms-fn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"a197f7f6bc5b8b28fecf482995623a4162f4437b36b3b641a2341e4ae21d8a17.zip"},"description":"Fetches today's Google Calendar events and sends SMS summary","environment":{"variables":{"GOOGLE_CALENDAR_ID":"","GOOGLE_SERVICE_ACCOUNT_JSON_B64":"","SMS_PHONE_NUMBER":""}},"functionName":"calendar-sms","handler":"handler.main","memorySize":256,"role":{"Fn::GetAtt":["calendarsmsfnServiceRoleCACE1462","Arn"]},"runtime":"python3.12","timeout":120}}}}},"calendar-sms-rule":{"id":"calendar-sms-rule","path":"CronStack/calendar-sms-rule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"CronStack/calendar-sms-rule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Schedule for calendar-sms","name":"calendar-sms-schedule","scheduleExpression":"cron(0 13 * * ? *)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["calendarsmsfn0F475053","Arn"]}}]}}},"AllowEventRuleCronStackcalendarsmsfn7D1AEF38":{"id":"AllowEventRuleCronStackcalendarsmsfn7D1AEF38","path":"CronStack/calendar-sms-rule/AllowEventRuleCronStackcalendarsmsfn7D1AEF38","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["calendarsmsfn0F475053","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["calendarsmsrule6E420577","Arn"]}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"CronStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"CronStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}},"Condition":{"id":"Condition","path":"CronStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CronStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CronStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}